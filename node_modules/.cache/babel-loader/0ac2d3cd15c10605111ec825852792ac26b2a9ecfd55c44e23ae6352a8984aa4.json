{"ast":null,"code":"var _jsxFileName = \"/Users/songjuhyeong/Desktop/nursing_frontend/src/components/Diary/DiaryList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useHistory } from 'react-router-dom';\nimport { differenceInDays } from 'date-fns';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction DiaryList() {\n  _s();\n  const [diaries, setDiaries] = useState([]);\n  const [showList, setShowList] = useState(false);\n  const [selectedDiary, setSelectedDiary] = useState(null);\n  const [chatInput, setChatInput] = useState('');\n  const [chatResponse, setChatResponse] = useState(null);\n  const [babyAge, setBabyAge] = useState(null);\n  const [developmentInfo, setDevelopmentInfo] = useState(null);\n  const [aiAnalysis, setAiAnalysis] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      history.push('/login');\n      return;\n    }\n\n    // 아기 생일 정보 가져오기\n    const fetchBabyInfo = async () => {\n      try {\n        // 임시로 로컬 스토리지에서 생일 정보를 가져옴\n        const babyBirthday = localStorage.getItem('babyBirthday');\n        if (!babyBirthday) {\n          throw new Error('생일 정보가 없습니다.');\n        }\n        const ageInDays = differenceInDays(new Date(), new Date(babyBirthday));\n        setBabyAge(ageInDays);\n        fetchDevelopmentInfo(ageInDays);\n      } catch (error) {\n        console.error('아기 정보 조회 상세 에러:', {\n          message: error.message,\n          stack: error.stack\n        });\n        setDevelopmentInfo({\n          title: \"아기 정보\",\n          description: \"아기의 정보를 불러오는데 실패했습니다. 회원가입 시 입력한 생일 정보를 확인해주세요.\",\n          suggestion: \"새로운 순간을 기록해볼까요?\"\n        });\n      }\n    };\n    fetchBabyInfo();\n    if (showList) {\n      fetchDiaries();\n    }\n  }, [showList, history]);\n  const fetchDiaries = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/diary`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('일기 목록을 불러오는데 실패했습니다.');\n      }\n      const data = await response.json();\n      console.log('받은 일기 데이터:', data);\n      setDiaries(data);\n    } catch (error) {\n      console.error('일기 목록 조회 에러:', error);\n    }\n  };\n  const handleDiaryClick = diary => {\n    setSelectedDiary(diary);\n  };\n  const handleClosePopup = () => {\n    setSelectedDiary(null);\n  };\n\n  // 팝업 외부 클릭 시 닫기\n  const handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      handleClosePopup();\n    }\n  };\n  const handleChatSubmit = async () => {\n    if (!chatInput.trim()) return;\n    try {\n      // 디버깅: 요청 전 상태 확인\n      console.log('=== 챗봇 요청 시작 ===');\n      console.log('입력된 질문:', chatInput);\n      console.log('요청 URL:', `${process.env.REACT_APP_API_URL}/api/chat`);\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        question: chatInput\n      });\n\n      // 디버깅: 응답 확인\n      console.log('챗봇 응답 데이터:', response.data);\n      setChatResponse({\n        text: response.data.answer,\n        loading: false\n      });\n      setChatInput('');\n    } catch (error) {\n      var _error$response, _error$response2, _error$response3;\n      // 디버깅: 에러 상세 정보\n      console.error('챗봇 에러:', {\n        message: error.message,\n        status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n        statusText: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.statusText,\n        data: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data\n      });\n      setChatResponse({\n        text: \"죄송합니다. 답변을 생성하는 중 문제가 발생했습니다.\",\n        loading: false,\n        error: true\n      });\n    }\n  };\n\n  // 아이 발달 정보를 ChatGPT API로 요청\n  const fetchDevelopmentInfo = async ageInDays => {\n    try {\n      const months = Math.floor(ageInDays / 30);\n      const prompt = `아기가 생후 ${months}개월입니다. 이 시기 아기의 발달 특징과 부모가 기록하면 좋을 만한 것들을 알려주세요. 다음 형식으로 답변해주세요: {\"title\": \"현재 시기\", \"description\": \"발달 특징\", \"suggestion\": \"기록 제안\"}`;\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        question: prompt\n      });\n\n      // API 응답을 JSON으로 파싱\n      const developmentData = JSON.parse(response.data.answer);\n      setDevelopmentInfo(developmentData);\n    } catch (error) {\n      console.error('발달 정보 조회 에러:', error);\n      // 에러 시 기본 정보 설정\n      setDevelopmentInfo({\n        title: `생후 ${Math.floor(ageInDays / 30)}개월`,\n        description: \"아기의 발달 정보를 불러오는데 실패했습니다.\",\n        suggestion: \"오늘의 특별한 순간을 기록해볼까요?\"\n      });\n    }\n  };\n\n  // AI 분석 함수 추가\n  const analyzeDiaryContent = async content => {\n    setIsAnalyzing(true);\n    try {\n      const prompt = `다음은 아이의 일기 내용입니다. 아이의 발달 상태, 행동 특징, 성격 등을 분석해주시고, 부모님께 조언도 해주세요: \"${content}\"`;\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        question: prompt\n      });\n      setAiAnalysis(response.data.answer);\n    } catch (error) {\n      console.error('AI 분석 에러:', error);\n      setAiAnalysis('분석에 실패했습니다.');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n  if (!showList) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [developmentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"development-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"age-badge\",\n            children: developmentInfo.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"development-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\uC6B0\\uB9AC \\uC544\\uC774\\uC758 \\uBC1C\\uB2EC \\uD2B9\\uC9D5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: developmentInfo.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestion-box\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"suggestion-icon\",\n                children: \"\\u270F\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: developmentInfo.suggestion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/create-diary\",\n              className: \"record-button\",\n              children: \"\\uC9C0\\uAE08 \\uAE30\\uB85D\\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/create-diary\",\n            className: \"main-button\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-icon\",\n              children: \"\\u270F\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-text\",\n              children: \"\\uC624\\uB298 \\uAE30\\uB85D\\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-description\",\n              children: \"\\uC0C8\\uB85C\\uC6B4 \\uC21C\\uAC04\\uC744 \\uAE30\\uB85D\\uD574\\uBCF4\\uC138\\uC694\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-button\",\n            onClick: () => setShowList(true),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-icon\",\n              children: \"\\uD83D\\uDCD6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-text\",\n              children: \"\\uB2E4\\uC2DC \\uC0B4\\uD3B4\\uBCF4\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-description\",\n              children: \"\\uC18C\\uC911\\uD55C \\uC21C\\uAC04\\uB4E4\\uC744 \\uB2E4\\uC2DC \\uB9CC\\uB098\\uBCF4\\uC138\\uC694\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatbot-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatbot-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"chatbot-icon\",\n              children: \"\\uD83E\\uDD16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\uC721\\uC544 \\uB3C4\\uC6B0\\uBBF8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatbot-search\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\\uC721\\uC544\\uC5D0 \\uB300\\uD574 \\uBB34\\uC5C7\\uC774\\uB4E0 \\uBB3C\\uC5B4\\uBCF4\\uC138\\uC694!\",\n              className: \"chatbot-input\",\n              value: chatInput,\n              onChange: e => setChatInput(e.target.value),\n              onKeyPress: e => e.key === 'Enter' && handleChatSubmit()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chatbot-button\",\n              onClick: handleChatSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"button-icon\",\n                children: \"\\uD83D\\uDCAC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), \"\\uC9C8\\uBB38\\uD558\\uAE30\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), chatResponse && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chatbot-response ${chatResponse.loading ? 'loading' : ''} ${chatResponse.error ? 'error' : ''}`,\n            children: chatResponse.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-indicator\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uB2F5\\uBCC0 \\uC0DD\\uC131 \\uC911\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dots\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \".\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \".\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \".\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 51\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"response-icon\",\n                children: chatResponse.error ? '❌' : '💡'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: chatResponse.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"diary-list-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uC6B0\\uB9AC \\uC544\\uC774\\uC758 \\uC131\\uC7A5\\uC77C\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"diary-grid\",\n      children: diaries.map(diary => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"diary-card\",\n        onClick: () => handleDiaryClick(diary),\n        children: [diary.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"diary-card-image\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: diary.imageUrl.replace(process.env.REACT_APP_API_URL, ''),\n            alt: \"\\uC77C\\uAE30 \\uC774\\uBBF8\\uC9C0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"diary-card-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: diary.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"diary-preview\",\n            children: diary.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"diary-date\",\n            children: new Date(diary.createdAt).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, diary._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), selectedDiary && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"diary-popup-backdrop\",\n      onClick: handleBackdropClick,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"diary-popup\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"popup-close\",\n          onClick: handleClosePopup,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-content\",\n          children: [selectedDiary.imageUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"popup-image\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: selectedDiary.imageUrl.replace(process.env.REACT_APP_API_URL, ''),\n              alt: \"\\uC77C\\uAE30 \\uC774\\uBBF8\\uC9C0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"popup-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: selectedDiary.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"popup-date\",\n              children: new Date(selectedDiary.date).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: selectedDiary.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"analyze-button\",\n              onClick: () => analyzeDiaryContent(selectedDiary.content),\n              disabled: isAnalyzing,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"analyze-icon\",\n                children: \"\\u2728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), \"AI \\uBD84\\uC11D\\uD558\\uAE30\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this), isAnalyzing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"analysis-loading\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uC544\\uC774\\uC758 \\uD2B9\\uC9D5\\uC744 \\uBD84\\uC11D\\uD558\\uACE0 \\uC788\\uC5B4\\uC694...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), aiAnalysis && !isAnalyzing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ai-analysis\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"analysis-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"analysis-icon\",\n                  children: \"\\uD83E\\uDD16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"AI\\uC758 \\uBD84\\uC11D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: aiAnalysis\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"back-button\",\n      onClick: () => setShowList(false),\n      children: \"\\uBA54\\uC778\\uC73C\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n_s(DiaryList, \"F4JwRzRnScQTO6Pr3kSHVQtsENQ=\", false, function () {\n  return [useHistory];\n});\n_c = DiaryList;\nexport default DiaryList;\nvar _c;\n$RefreshReg$(_c, \"DiaryList\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useHistory","differenceInDays","jsxDEV","_jsxDEV","Fragment","_Fragment","DiaryList","_s","diaries","setDiaries","showList","setShowList","selectedDiary","setSelectedDiary","chatInput","setChatInput","chatResponse","setChatResponse","babyAge","setBabyAge","developmentInfo","setDevelopmentInfo","aiAnalysis","setAiAnalysis","isAnalyzing","setIsAnalyzing","history","token","localStorage","getItem","push","fetchBabyInfo","babyBirthday","Error","ageInDays","Date","fetchDevelopmentInfo","error","console","message","stack","title","description","suggestion","fetchDiaries","response","fetch","process","env","REACT_APP_API_URL","headers","ok","data","json","log","handleDiaryClick","diary","handleClosePopup","handleBackdropClick","e","target","currentTarget","handleChatSubmit","trim","post","question","text","answer","loading","_error$response","_error$response2","_error$response3","status","statusText","months","Math","floor","prompt","developmentData","JSON","parse","analyzeDiaryContent","content","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","type","placeholder","value","onChange","onKeyPress","key","map","imageUrl","src","replace","alt","createdAt","toLocaleDateString","_id","date","disabled","_c","$RefreshReg$"],"sources":["/Users/songjuhyeong/Desktop/nursing_frontend/src/components/Diary/DiaryList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useHistory } from 'react-router-dom';\nimport { differenceInDays } from 'date-fns';\n\nfunction DiaryList() {\n  const [diaries, setDiaries] = useState([]);\n  const [showList, setShowList] = useState(false);\n  const [selectedDiary, setSelectedDiary] = useState(null);\n  const [chatInput, setChatInput] = useState('');\n  const [chatResponse, setChatResponse] = useState(null);\n  const [babyAge, setBabyAge] = useState(null);\n  const [developmentInfo, setDevelopmentInfo] = useState(null);\n  const [aiAnalysis, setAiAnalysis] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      history.push('/login');\n      return;\n    }\n\n    // 아기 생일 정보 가져오기\n    const fetchBabyInfo = async () => {\n      try {\n        // 임시로 로컬 스토리지에서 생일 정보를 가져옴\n        const babyBirthday = localStorage.getItem('babyBirthday');\n        \n        if (!babyBirthday) {\n          throw new Error('생일 정보가 없습니다.');\n        }\n\n        const ageInDays = differenceInDays(new Date(), new Date(babyBirthday));\n        setBabyAge(ageInDays);\n        fetchDevelopmentInfo(ageInDays);\n      } catch (error) {\n        console.error('아기 정보 조회 상세 에러:', {\n          message: error.message,\n          stack: error.stack\n        });\n        setDevelopmentInfo({\n          title: \"아기 정보\",\n          description: \"아기의 정보를 불러오는데 실패했습니다. 회원가입 시 입력한 생일 정보를 확인해주세요.\",\n          suggestion: \"새로운 순간을 기록해볼까요?\"\n        });\n      }\n    };\n\n    fetchBabyInfo();\n    if (showList) {\n      fetchDiaries();\n    }\n  }, [showList, history]);\n\n  const fetchDiaries = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/diary`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('일기 목록을 불러오는데 실패했습니다.');\n      }\n\n      const data = await response.json();\n      console.log('받은 일기 데이터:', data);\n      setDiaries(data);\n    } catch (error) {\n      console.error('일기 목록 조회 에러:', error);\n    }\n  };\n\n  const handleDiaryClick = (diary) => {\n    setSelectedDiary(diary);\n  };\n\n  const handleClosePopup = () => {\n    setSelectedDiary(null);\n  };\n\n  // 팝업 외부 클릭 시 닫기\n  const handleBackdropClick = (e) => {\n    if (e.target === e.currentTarget) {\n      handleClosePopup();\n    }\n  };\n\n  const handleChatSubmit = async () => {\n    if (!chatInput.trim()) return;\n\n    try {\n      // 디버깅: 요청 전 상태 확인\n      console.log('=== 챗봇 요청 시작 ===');\n      console.log('입력된 질문:', chatInput);\n      console.log('요청 URL:', `${process.env.REACT_APP_API_URL}/api/chat`);\n\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        question: chatInput\n      });\n      \n      // 디버깅: 응답 확인\n      console.log('챗봇 응답 데이터:', response.data);\n      \n      setChatResponse({\n        text: response.data.answer,\n        loading: false\n      });\n      setChatInput('');\n    } catch (error) {\n      // 디버깅: 에러 상세 정보\n      console.error('챗봇 에러:', {\n        message: error.message,\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        data: error.response?.data\n      });\n      \n      setChatResponse({\n        text: \"죄송합니다. 답변을 생성하는 중 문제가 발생했습니다.\",\n        loading: false,\n        error: true\n      });\n    }\n  };\n\n  // 아이 발달 정보를 ChatGPT API로 요청\n  const fetchDevelopmentInfo = async (ageInDays) => {\n    try {\n      const months = Math.floor(ageInDays / 30);\n      const prompt = `아기가 생후 ${months}개월입니다. 이 시기 아기의 발달 특징과 부모가 기록하면 좋을 만한 것들을 알려주세요. 다음 형식으로 답변해주세요: {\"title\": \"현재 시기\", \"description\": \"발달 특징\", \"suggestion\": \"기록 제안\"}`;\n\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        question: prompt\n      });\n\n      // API 응답을 JSON으로 파싱\n      const developmentData = JSON.parse(response.data.answer);\n      setDevelopmentInfo(developmentData);\n    } catch (error) {\n      console.error('발달 정보 조회 에러:', error);\n      // 에러 시 기본 정보 설정\n      setDevelopmentInfo({\n        title: `생후 ${Math.floor(ageInDays / 30)}개월`,\n        description: \"아기의 발달 정보를 불러오는데 실패했습니다.\",\n        suggestion: \"오늘의 특별한 순간을 기록해볼까요?\"\n      });\n    }\n  };\n\n  // AI 분석 함수 추가\n  const analyzeDiaryContent = async (content) => {\n    setIsAnalyzing(true);\n    try {\n      const prompt = `다음은 아이의 일기 내용입니다. 아이의 발달 상태, 행동 특징, 성격 등을 분석해주시고, 부모님께 조언도 해주세요: \"${content}\"`;\n      \n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/chat`, {\n        question: prompt\n      });\n\n      setAiAnalysis(response.data.answer);\n    } catch (error) {\n      console.error('AI 분석 에러:', error);\n      setAiAnalysis('분석에 실패했습니다.');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  if (!showList) {\n    return (\n      <div className=\"main-container\">\n        <div className=\"main-content\">\n          {developmentInfo && (\n            <div className=\"development-card\">\n              <div className=\"age-badge\">{developmentInfo.title}</div>\n              <div className=\"development-info\">\n                <h3>우리 아이의 발달 특징</h3>\n                <p>{developmentInfo.description}</p>\n                <div className=\"suggestion-box\">\n                  <span className=\"suggestion-icon\">✏️</span>\n                  <p>{developmentInfo.suggestion}</p>\n                </div>\n                <Link to=\"/create-diary\" className=\"record-button\">\n                  지금 기록하기\n                </Link>\n              </div>\n            </div>\n          )}\n          <div className=\"main-buttons\">\n            <Link to=\"/create-diary\" className=\"main-button\">\n              <div className=\"button-icon\">✏️</div>\n              <div className=\"button-text\">오늘 기록하기</div>\n              <div className=\"button-description\">새로운 순간을 기록해보세요</div>\n            </Link>\n            <div className=\"main-button\" onClick={() => setShowList(true)}>\n              <div className=\"button-icon\">📖</div>\n              <div className=\"button-text\">다시 살펴보기</div>\n              <div className=\"button-description\">소중한 순간들을 다시 만나보세요</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"chatbot-section\">\n          <div className=\"chatbot-container\">\n            <div className=\"chatbot-header\">\n              <span className=\"chatbot-icon\">🤖</span>\n              <h3>육아 도우미</h3>\n            </div>\n            <div className=\"chatbot-search\">\n              <input\n                type=\"text\"\n                placeholder=\"육아에 대해 무엇이든 물어보세요!\"\n                className=\"chatbot-input\"\n                value={chatInput}\n                onChange={(e) => setChatInput(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && handleChatSubmit()}\n              />\n              <button className=\"chatbot-button\" onClick={handleChatSubmit}>\n                <span className=\"button-icon\">💬</span>\n                질문하기\n              </button>\n            </div>\n            {chatResponse && (\n              <div className={`chatbot-response ${chatResponse.loading ? 'loading' : ''} ${chatResponse.error ? 'error' : ''}`}>\n                {chatResponse.loading ? (\n                  <div className=\"loading-indicator\">\n                    <span>답변 생성 중</span>\n                    <div className=\"loading-dots\">\n                      <span>.</span><span>.</span><span>.</span>\n                    </div>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"response-icon\">\n                      {chatResponse.error ? '❌' : '💡'}\n                    </div>\n                    <p>{chatResponse.text}</p>\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"diary-list-container\">\n      <h2>우리 아이의 성장일기</h2>\n      <div className=\"diary-grid\">\n        {diaries.map((diary) => (\n          <div \n            key={diary._id} \n            className=\"diary-card\"\n            onClick={() => handleDiaryClick(diary)}\n          >\n            {diary.imageUrl && (\n              <div className=\"diary-card-image\">\n                <img \n                  src={diary.imageUrl.replace(process.env.REACT_APP_API_URL, '')} \n                  alt=\"일기 이미지\" \n                />\n              </div>\n            )}\n            <div className=\"diary-card-content\">\n              <h3>{diary.title}</h3>\n              <p className=\"diary-preview\">{diary.content}</p>\n              <div className=\"diary-date\">\n                {new Date(diary.createdAt).toLocaleDateString()}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {selectedDiary && (\n        <div className=\"diary-popup-backdrop\" onClick={handleBackdropClick}>\n          <div className=\"diary-popup\">\n            <button className=\"popup-close\" onClick={handleClosePopup}>×</button>\n            <div className=\"popup-content\">\n              {selectedDiary.imageUrl && (\n                <div className=\"popup-image\">\n                  <img \n                    src={selectedDiary.imageUrl.replace(process.env.REACT_APP_API_URL, '')}\n                    alt=\"일기 이미지\"\n                  />\n                </div>\n              )}\n              <div className=\"popup-text\">\n                <h2>{selectedDiary.title}</h2>\n                <div className=\"popup-date\">{new Date(selectedDiary.date).toLocaleDateString()}</div>\n                <p>{selectedDiary.content}</p>\n                \n                <button \n                  className=\"analyze-button\"\n                  onClick={() => analyzeDiaryContent(selectedDiary.content)}\n                  disabled={isAnalyzing}\n                >\n                  <span className=\"analyze-icon\">✨</span>\n                  AI 분석하기\n                </button>\n\n                {isAnalyzing && (\n                  <div className=\"analysis-loading\">\n                    <div className=\"loading-spinner\"></div>\n                    <p>아이의 특징을 분석하고 있어요...</p>\n                  </div>\n                )}\n\n                {aiAnalysis && !isAnalyzing && (\n                  <div className=\"ai-analysis\">\n                    <div className=\"analysis-header\">\n                      <span className=\"analysis-icon\">🤖</span>\n                      <h4>AI의 분석</h4>\n                    </div>\n                    <p>{aiAnalysis}</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <button className=\"back-button\" onClick={() => setShowList(false)}>\n        메인으로 돌아가기\n      </button>\n    </div>\n  );\n}\n\nexport default DiaryList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}